{"ast":null,"code":"// Fetch the API, fetching the Graph QL endpoint\nasync function fetchAPI(query, {\n  variables\n} = {}) {\n  // get the graph QL endpoint\n  // ${process.env.API_URL}\n  const res = await fetch(`https://ezblog-api.herokuapp.com/articles/graphql`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    // save the query and variables to the body of the res (res.body)\n    body: JSON.stringify({\n      query,\n      variables\n    })\n  }); // check for errors in the APIs response\n\n  const json = await res.json();\n\n  if (json.errors) {\n    console.error(json.errors); // if there are errors, throw an error\n\n    throw new Error('Failed to fetch API');\n  }\n\n  return json.data;\n} // GET all articles\n\n\nexport async function getArticles() {\n  const data = await fetchAPI(`query Articles {\n    articles {\n      id\n      title\n      content\n      category {\n        id\n        name\n      }\n      image {\n        url\n        alternativeText\n      }\n    }\n  }`);\n  return data.articles;\n} // GET a single article\n\nexport async function getArticle(id) {\n  const data = await fetchAPI(`query Articles($id: ID!) {\n    article(id: $id) {\n      id\n      title\n      content\n      image {\n        url\n        alternativeText\n      }\n      category {\n        id\n        name\n      }\n      published_at\n    }\n  }`, {\n    variables: {\n      id\n    }\n  });\n  return data.article;\n} // GET all categories\n\nexport async function getCategories() {\n  const data = await fetchAPI(`query Categories {\n    categories {\n      id\n      name\n    }\n  }`);\n  return data.categories;\n} // GET a single category\n\nexport async function getCategory(id) {\n  const data = await fetchAPI(`query Category($id: ID!) {\n    category(id: $id) {\n      id\n      name\n      articles {\n        id\n        title\n        content\n        image {\n          url\n          alternativeText\n        }\n        category {\n          id\n          name\n        }\n      }\n    }\n  }\n`, {\n    variables: {\n      id\n    }\n  });\n  return data.category;\n}","map":{"version":3,"sources":["/Users/tonygorgioski/Developer/exblog/client/lib/api.js"],"names":["fetchAPI","query","variables","res","fetch","method","headers","body","JSON","stringify","json","errors","console","error","Error","data","getArticles","articles","getArticle","id","article","getCategories","categories","getCategory","category"],"mappings":"AAAA;AACA,eAAeA,QAAf,CAAwBC,KAAxB,EAA+B;AAAEC,EAAAA;AAAF,IAAgB,EAA/C,EAAmD;AACjD;AACA;AACA,QAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,mDAAF,EAAsD;AAC3EC,IAAAA,MAAM,EAAE,MADmE;AAE3EC,IAAAA,OAAO,EAAE;AACP,sBAAgB;AADT,KAFkE;AAK3E;AACAC,IAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBR,MAAAA,KADmB;AAEnBC,MAAAA;AAFmB,KAAf;AANqE,GAAtD,CAAvB,CAHiD,CAejD;;AACA,QAAMQ,IAAI,GAAG,MAAMP,GAAG,CAACO,IAAJ,EAAnB;;AACA,MAAIA,IAAI,CAACC,MAAT,EAAiB;AACfC,IAAAA,OAAO,CAACC,KAAR,CAAcH,IAAI,CAACC,MAAnB,EADe,CAEf;;AACA,UAAM,IAAIG,KAAJ,CAAU,qBAAV,CAAN;AACD;;AAED,SAAOJ,IAAI,CAACK,IAAZ;AACD,C,CAED;;;AACA,OAAO,eAAeC,WAAf,GAA6B;AAClC,QAAMD,IAAI,GAAG,MAAMf,QAAQ,CAAE;;;;;;;;;;;;;;IAAF,CAA3B;AAeA,SAAOe,IAAI,CAACE,QAAZ;AACD,C,CAED;;AACA,OAAO,eAAeC,UAAf,CAA0BC,EAA1B,EAA8B;AACnC,QAAMJ,IAAI,GAAG,MAAMf,QAAQ,CACxB;;;;;;;;;;;;;;;IADwB,EAiBzB;AAAEE,IAAAA,SAAS,EAAE;AAAEiB,MAAAA;AAAF;AAAb,GAjByB,CAA3B;AAmBA,SAAOJ,IAAI,CAACK,OAAZ;AACD,C,CAED;;AACA,OAAO,eAAeC,aAAf,GAA+B;AACpC,QAAMN,IAAI,GAAG,MAAMf,QAAQ,CAAE;;;;;IAAF,CAA3B;AAMA,SAAOe,IAAI,CAACO,UAAZ;AACD,C,CAED;;AACA,OAAO,eAAeC,WAAf,CAA2BJ,EAA3B,EAA+B;AACpC,QAAMJ,IAAI,GAAG,MAAMf,QAAQ,CACxB;;;;;;;;;;;;;;;;;;;CADwB,EAqBzB;AAAEE,IAAAA,SAAS,EAAE;AAAEiB,MAAAA;AAAF;AAAb,GArByB,CAA3B;AAuBA,SAAOJ,IAAI,CAACS,QAAZ;AACD","sourcesContent":["// Fetch the API, fetching the Graph QL endpoint\nasync function fetchAPI(query, { variables } = {}) {\n  // get the graph QL endpoint\n  // ${process.env.API_URL}\n  const res = await fetch(`https://ezblog-api.herokuapp.com/articles/graphql`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    // save the query and variables to the body of the res (res.body)\n    body: JSON.stringify({\n      query,\n      variables\n    })\n  })\n\n  // check for errors in the APIs response\n  const json = await res.json()\n  if (json.errors) {\n    console.error(json.errors)\n    // if there are errors, throw an error\n    throw new Error('Failed to fetch API')\n  }\n\n  return json.data\n}\n\n// GET all articles\nexport async function getArticles() {\n  const data = await fetchAPI(`query Articles {\n    articles {\n      id\n      title\n      content\n      category {\n        id\n        name\n      }\n      image {\n        url\n        alternativeText\n      }\n    }\n  }`)\n  return data.articles\n}\n\n// GET a single article\nexport async function getArticle(id) {\n  const data = await fetchAPI(\n    `query Articles($id: ID!) {\n    article(id: $id) {\n      id\n      title\n      content\n      image {\n        url\n        alternativeText\n      }\n      category {\n        id\n        name\n      }\n      published_at\n    }\n  }`,\n    { variables: { id } }\n  )\n  return data.article\n}\n\n// GET all categories\nexport async function getCategories() {\n  const data = await fetchAPI(`query Categories {\n    categories {\n      id\n      name\n    }\n  }`)\n  return data.categories\n}\n\n// GET a single category\nexport async function getCategory(id) {\n  const data = await fetchAPI(\n    `query Category($id: ID!) {\n    category(id: $id) {\n      id\n      name\n      articles {\n        id\n        title\n        content\n        image {\n          url\n          alternativeText\n        }\n        category {\n          id\n          name\n        }\n      }\n    }\n  }\n`,\n    { variables: { id } }\n  )\n  return data.category\n}\n"]},"metadata":{},"sourceType":"module"}